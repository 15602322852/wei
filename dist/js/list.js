"use strict";!function(){var n=16,a=20,i=document.querySelectorAll(".list-group"),r=document.querySelector(".pagination"),l=[],s=0;function o(t){for(var e=0;e<i.length;e++)i[e].innerHTML="";for(e=0;e<t.length;e++){var n=t[e];console.log(n.goods_id);var a='<li class="list-group-item">\n                <div class="product-item text-center">\n                    \n                    <p>\n                        <img style ="width:220px;height:220px"  alt="Responsive image" src="'+n.hd_thumb_url+'">\n                    </p>\n                    <p class="intro">\n                       <a href="../HTML/detail.html?id='+n.goods_id+'&a=1">  '+n.goods_name+" </a>\n                    </p>\n                    <p>\n                        ￥"+n.group_price/100+'\n                    </p>\n                    <p>\n                        <a class="btn btn-default addToCart"  role="button" data-id="'+n.goods_id+'">加入购物车</a>\n                        <a  href="../HTML/detail.html?id='+n.goods_id+'&a=1" class="btn btn-default addToDetail"  role="button" data-id="'+n.goods_id+'">查看详情页</a>\n                    </p>\n                </div>\n            </li>';i[e%4].innerHTML+=a}}function d(t){var e='<li>\n                <a aria-label="Previous">\n                    <span class=\'leftBtn\' aria-hidden="true">&laquo;</span>\n                </a>\n            </li>';if(t<=6)for(var n=0;n<10;n++)e+="<li><a class='num'>"+(n+1)+"</a></li>";else{var a=s<t+4?s:t+4;for(n=t-6;n<a;n++)e+="<li><a class='num'>"+(n+1)+"</a></li>"}e+=' <li>\n            <a  aria-label="Next">\n                <span class=\'rightBtn\' aria-hidden="true">&raquo;</span>\n            </a>\n        </li>',r.innerHTML=e}pAjax({url:"/api?tf_id=TFM00R0_254&page=1&size=100"}).then(function(t){if((t=JSON.parse(t)).result){for(var e=0;e<t.result.length;e++)t.result[e].sales=0;localStorage.setItem("shoppingCartInfoo",JSON.stringify(t.result)),l=t.result,o(t.result.slice(a*n,a*n+n)),s=Math.ceil(l.length/8),d(a)}}),r.onclick=function(t){if("leftBtn"===t.target.className){if(--a<0)return void(a=0);o(l.slice(a*n,a*n+n)),d(a)}else if("rightBtn"===t.target.className){if(s<++a)return void(a=s);o(l.slice(a*n,a*n+n)),d(a)}else if("num"===t.target.className){if(a===t.target.innerHTML-1)return;a=t.target.innerHTML-1,o(l.slice(a*n,a*n+n)),d(a)}},document.querySelector(".list").onclick=function(t){if(getCookie("登录成功")||(alert("请先登录"),location.href="../HTML/index.html"),t.target.className.includes("addToCart")){var e=t.target.getAttribute("data-id"),n=JSON.parse(localStorage.getItem("shoppingCart"))||[],a=n.find(function(t){return t.goods_id==e});a?a.number++:((a=l.find(function(t){return t.goods_id==e})).number=1,n.push(a)),localStorage.setItem("shoppingCart",JSON.stringify(n))}}}();